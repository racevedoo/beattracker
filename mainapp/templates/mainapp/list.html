<!DOCTYPE html>
<html>
    {% load staticfiles %}
    <head>
        <meta charset="utf-8">
        <title>Beat Tracker</title>   
        <link href="{% static "css/bootstrap.min.css" %}" rel="stylesheet" type="text/css">
        <link href="{% static "css/bootstrap-theme.min.css" %}" rel="stylesheet" type="text/css">
        <script src="{% static "js/jquery-2.1.4.min.js" %}" type="text/javascript" ></script>
    </head>
    <body>
    <!-- List of uploaded documents -->
    {% if tracks %}
        <ul>
        {% for track in tracks %}
            <li><a href="{{ track.track_file.url }}">{{ track.track_file.name }}</a></li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No tracks.</p>
    {% endif %}

    <form action="{% url 'upload' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <p>{{ form.non_field_errors }}</p>
        <p>{{ form.docfile.label_tag }} {{ form.docfile.help_text }}</p>
        <p>
            {{ form.docfile.errors }}
            {{ form.docfile }}
        </p>
        <input type="file" name="track_file" />
        <p><input type="submit" value="Upload" /></p>
        <audio controls id="track" src="/media/tracks/sample.wav" hidden>
    </form>
    </body>
    <script type="text/javascript">
        var audio = document.getElementById('track');
        function play(){
            $("#track").trigger('play');
        }

        function pause(){
            $("#track").trigger('pause');   
        }

        function stop(){
            pause();
            $("#track").prop("currentTime",0);  
        }

        function getCurrentTime(){
            return audio.currentTime * 1000;
        }

        $(document).ready(function(){
            console.log("carregado");
            //$("#track").trigger('play');
        });
    </script>
</html> 